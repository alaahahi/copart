import{o as h,c as z,w as f,a as x,b as e,d as K,t as s,e as C,v as B,i as y,T as P,r as c,D as L,g as l,j as n,F as V,H as Q,k as A,z as X,h as Y,n as Z,L as ee}from"./app.d0ea6d8b.js";import{a as ft,_ as te}from"./AuthenticatedLayout.d961969d.js";/* empty css                                              *//* empty css                                                         */import{_ as b}from"./InputLabel.ab532e94.js";import{_ as U}from"./TextInput.8ad950d9.js";import{a as $}from"./index.92785916.js";import{s as oe}from"./show.63c75199.js";import"./trash.9bc2f2fc.js";import{e as ae}from"./edit.8b03fe11.js";import{M as se}from"./ModalDelCar.f1a6a667.js";import{W as le}from"./v3-infinite-loading.es.96ffa2e7.js";import{d as re}from"./debounce.22008c5c.js";/* empty css                                                    */const de={key:0,class:"modal-mask"},ne={class:"modal-wrapper max-h-[80vh]"},ie={class:"modal-container dark:bg-gray-900 overflow-auto max-h-[80vh]"},ce={class:"modal-header"},me={class:"modal-body"},ue=e("h2",{class:"text-center dark:text-gray-200"}," \u062A\u0639\u062F\u064A\u0644 \u0632\u0628\u0648\u0646 ",-1),pe={className:"mb-4 mx-5"},he={class:"dark:text-gray-200",for:"name"},be={className:"mb-4 mx-5"},fe={class:"dark:text-gray-200",for:"phone"},ge={class:"modal-footer my-2"},_e={class:"flex flex-row"},ve={class:"basis-1/2 px-4"},xe={class:"basis-1/2 px-4"},ye=["disabled"],q={__name:"ModalEditClient",props:{show:Boolean,formData:Object},setup(m){return(d,r)=>(h(),z(P,{name:"modal"},{default:f(()=>[m.show?(h(),x("div",de,[e("div",ne,[e("div",ie,[e("div",ce,[K(d.$slots,"header")]),e("div",me,[ue,e("div",pe,[e("label",he,s(d.$t("name")),1),C(e("input",{id:"name",type:"text",class:"mt-1 block w-full border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm dark:bg-gray-700 dark:text-gray-200 dark:border-gray-900","onUpdate:modelValue":r[0]||(r[0]=i=>m.formData.name=i)},null,512),[[B,m.formData.name]])]),e("div",be,[e("label",fe,s(d.$t("phone")),1),C(e("input",{id:"phone",type:"text",class:"mt-1 block w-full border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm dark:bg-gray-700 dark:text-gray-200 dark:border-gray-900","onUpdate:modelValue":r[1]||(r[1]=i=>m.formData.phone=i)},null,512),[[B,m.formData.phone]])])]),e("div",ge,[e("div",_e,[e("div",ve,[e("button",{class:"modal-default-button py-3 bg-gray-500 rounded",onClick:r[2]||(r[2]=i=>{d.$emit("close")})},s(d.$t("cancel")),1)]),e("div",xe,[e("button",{class:"modal-default-button py-3 bg-rose-500 rounded col-6",onClick:r[3]||(r[3]=i=>{d.$emit("a",m.formData),m.formData=""}),disabled:!m.formData.name},s(d.$t("yes")),9,ye)])])])])])])):y("",!0)]),_:3}))}};const ke={class:"mb-5 dark:text-white text-center"},we={class:"py-12"},$e={class:"mx-auto sm:px-6 lg:px-8"},Ce={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},Ne={class:"p-6 dark:bg-gray-900"},De={class:"grid grid-cols-2 md:grid-cols-5 lg:grid-cols-7 gap-2 lg:gap-1"},Me={class:"flex items-center max-w-5xl"},Ve=e("label",{class:"dark:text-gray-200",for:"simple-search"},null,-1),Ae={class:"relative w-full"},Be=e("div",{class:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"},[e("svg",{"aria-hidden":"true",class:"w-5 h-5 text-gray-500 dark:text-gray-200 dark:text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])],-1),Ee={value:"0"},Ie=e("option",{value:"debit"},"\u064A\u0648\u062C\u062F \u062F\u064A\u0646",-1),He={class:"text-center px-4"},Le={class:"px-4"},Ue={className:"mb-4"},qe={class:"px-4"},ze={className:"mb-4"},je={className:"mb-4  mr-5 print:hidden"},Re=["href"],Se=e("span",null,"\u0637\u0628\u0627\u0639\u0629",-1),Te=[Se],Fe={class:"relative overflow-x-auto shadow-md sm:rounded-lg"},Oe={class:"w-full text-sm text-right text-gray-500 dark:text-gray-200 dark:text-gray-400 text-center"},Ge={class:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400 text-center"},We={class:"rounded-l-lg mb-2 sm:mb-0"},Je=e("th",{className:"px-1 py-2 text-base"},"#",-1),Ke={className:"px-1 py-2 text-base"},Pe={className:"px-1 py-2 text-base"},Qe=e("th",{className:"px-1 py-2 text-base"},"\u0627\u0644\u0633\u064A\u0627\u0631\u0627\u062A",-1),Xe=e("th",{className:"px-1 py-2 text-base"}," \u0627\u0644\u0633\u064A\u0627\u0631\u0627\u062A \u063A\u064A\u0631 \u0645\u062F\u0641\u0648\u0639",-1),Ye=e("th",{className:"px-1 py-2 text-base"}," \u0627\u0644\u0633\u064A\u0627\u0631\u0627\u062A \u0645\u062F\u0641\u0648\u0639",-1),Ze={className:"px-1 py-2 text-base"},et={className:"px-1 py-2 text-base"},tt={class:"flex-1 sm:flex-none dark:bg-gray-700 dark:text-gray-200"},ot={className:"border border-white  dark:border-gray-800 text-center px-4 py-2"},at={className:"border border-white dark:border-gray-800 text-center  dark:text-gray-200 text-black px-1 py-2 ",style:{"font-weight":"bold","font-size":"16px"}},st={className:"border border-white  dark:border-gray-800 text-center px-4 py-2"},lt={className:"border border-white  dark:border-gray-800 text-center px-4 py-2"},rt={className:"border border-white  dark:border-gray-800 text-center px-4 py-2"},dt={className:"border border-white  dark:border-gray-800 text-center px-4 py-2"},nt={className:"border border-white  dark:border-gray-800 text-center px-4 py-2"},it={className:"border border-white  dark:border-gray-800 text-center px-4 py-2",style:{"min-height":"42px"}},ct=["onClick"];const mt={class:"mt-3 text-center",style:{direction:"ltr"}},ut={class:"spaner"},At={__name:"Index",setup(m){let d=c(!1),r=c(!1),i=c(!1);const g=c([]);let u=c({}),E=c(0);const _=c(0),v=c(0),p=c(""),I=c(0);let N=c(!1),D=1,k=c({}),w=new AbortController;const H=()=>{D=1,g.value.length=0,N.value=!N.value},j=async a=>{try{const t=await $.get("api/getIndexClients",{params:{limit:25,page:D,q:p.value,user_id:E.value,from:_.value,to:v.value},signal:w.signal});k.value=t.data,k.value.data.length<25?(g.value.push(...k.value.data),a.complete()):(g.value.push(...k.value.data),a.loaded()),D++}catch(t){console.error(t)}},R=()=>{w&&w.abort(),w=new AbortController};L([p,E,_,v],()=>{R(),M()}),L(I,a=>{console.log(a===1?"Loading data...":"Data loaded")});const M=re(()=>{I.value=1,H()},500);function S(a={}){u.value=a,r.value=!0}function T(a={}){u.value=a,d.value=!0}function F(a){$.post("/api/clientsStore",a).then(t=>{window.location.reload()}).catch(t=>{console.error(t)})}function O(a){$.post("/api/clientsEdit",a).then(t=>{window.location.reload()}).catch(t=>{console.error(t)})}function pt(a={}){u.value=a,i.value=!0}function G(a){$.post("/api/delClient",a).then(t=>{i.value=!1,H()}).catch(t=>{console.error(t)})}return(a,t)=>(h(),x(V,null,[l(n(Q),{title:"Dashboard"}),l(te,null,{default:f(()=>[l(q,{show:n(r),formData:n(u),onA:t[0]||(t[0]=o=>F(o)),onClose:t[1]||(t[1]=o=>A(r)?r.value=!1:r=!1)},{header:f(()=>[]),_:1},8,["show","formData"]),l(se,{show:!!n(i),formData:n(u),onA:t[2]||(t[2]=o=>G(o)),onClose:t[3]||(t[3]=o=>A(i)?i.value=!1:i=!1)},{header:f(()=>[e("h2",ke," \u0647\u0644 \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u062D\u0630\u0641 \u0627\u0644\u062A\u0627\u062C\u0631 "+s(n(u).name)+" \u061F ",1)]),_:1},8,["show","formData"]),l(q,{show:n(d),formData:n(u),onA:t[4]||(t[4]=o=>O(o)),onClose:t[5]||(t[5]=o=>A(d)?d.value=!1:d=!1)},{header:f(()=>[]),_:1},8,["show","formData"]),e("div",we,[e("div",$e,[e("div",Ce,[e("div",Ne,[e("div",De,[e("div",null,[l(b,{for:"from",value:a.$t("search"),class:"mb-1"},null,8,["value"]),e("form",Me,[Ve,e("div",Ae,[Be,C(e("input",{"onUpdate:modelValue":t[6]||(t[6]=o=>p.value=o),onInput:t[7]||(t[7]=(...o)=>n(M)&&n(M)(...o)),type:"text",id:"simple-search",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"\u0628\u062D\u062B",required:""},null,544),[[B,p.value]])])])]),e("div",null,[l(b,{for:"from",value:"\u062A\u062D\u062F\u064A\u062F \u0627\u0644\u0641\u0626\u0629",class:"mb-1"}),C(e("select",{"onUpdate:modelValue":t[8]||(t[8]=o=>p.value=o),id:"default",class:"pr-8 bg-gray-50 border border-gray-300 text-gray-900 mb-6 text-sm rounded-lg focus:ring-red-500 focus:border-red-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-red-500 dark:focus:border-red-500"},[e("option",Ee,s(a.$t("allOwners")),1),Ie],512),[[X,p.value]])]),e("div",He,[l(b,{for:"pay",value:"\u0627\u0636\u0627\u0641\u0629",class:"mb-1"}),e("button",{className:"px-6 mb-12 py-2 mt-1 font-bold text-white bg-red-500 rounded",onClick:t[9]||(t[9]=o=>S())},s(a.$t("addCustomer")),1)]),e("div",Le,[e("div",Ue,[l(b,{for:"from",value:a.$t("from_date")},null,8,["value"]),l(U,{id:"from",type:"date",class:"mt-1 block w-full",modelValue:_.value,"onUpdate:modelValue":t[10]||(t[10]=o=>_.value=o)},null,8,["modelValue"])])]),e("div",qe,[e("div",ze,[l(b,{for:"to",value:a.$t("to_date")},null,8,["value"]),l(U,{id:"to",type:"date",class:"mt-1 block w-full",modelValue:v.value,"onUpdate:modelValue":t[11]||(t[11]=o=>v.value=o)},null,8,["modelValue"])])]),e("div",je,[l(b,{for:"pay",value:"\u0637\u0628\u0627\u0639\u0629"}),e("a",{target:"_blank",href:`api/getIndexClients?from=${_.value}&to=${v.value}&print=1&q=${p.value}`,class:"px-6 mb-12 py-2 mt-1 font-bold text-white bg-orange-500 rounded d-block",style:{width:"100%",display:"block","text-align":"center"}},Te,8,Re)])]),e("div",Fe,[e("table",Oe,[e("thead",Ge,[e("tr",We,[Je,e("th",Ke,s(a.$t("name")),1),e("th",Pe,s(a.$t("phoneNumber")),1),Qe,Xe,Ye,e("th",Ze,s(a.$t("debt")),1),e("th",et,s(a.$t("execute")),1)])]),e("tbody",tt,[(h(!0),x(V,null,Y(g.value,(o,W)=>(h(),x("tr",{key:o==null?void 0:o.id,class:Z(["border-b border-white dark:bg-gray-900 dark:border-gray-900 hover:bg-gray-50 dark:hover:bg-gray-600",o.balance<=0?"bg-green-100 dark:bg-green-900":"bg-red-100 dark:bg-red-900"])},[o!=null&&o.id?(h(),x(V,{key:0},[e("td",ot,s(W),1),e("td",at,s(o.name),1),e("td",st,s(o.phone),1),e("td",lt,s(o.car_count),1),e("td",rt,s(o.car_count-o.car_count_completed),1),e("td",dt,s(o.car_count_completed),1),e("td",nt,s(o.balance)+" $",1),e("td",it,[o.car_count?(h(),z(n(ee),{key:0,style:{display:"inline-flex"},className:"px-1 py-1  text-white mx-1 bg-blue-500 rounded d-inline-block",href:a.route("showClients",o.id)},{default:f(()=>[l(oe)]),_:2},1032,["href"])):y("",!0),e("button",{tabIndex:"1",class:"px-1 py-1 text-white mx-1 bg-slate-500 rounded",onClick:J=>T(o)},[l(ae)],8,ct),y("",!0),y("",!0)])],64)):y("",!0)],2))),128))])])]),e("div",mt,[e("div",ut,[l(n(le),{laravelData:g.value,onInfinite:j,identifier:n(N)},null,8,["laravelData","identifier"])])])])])])])]),_:1})],64))}};export{At as default};
